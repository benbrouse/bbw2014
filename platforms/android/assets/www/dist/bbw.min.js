/*! bbw 12-03-2014 */
angular.module("events",["bbw.event-service","bbw.event-index-controller","bbw.event-detail-controller","bbw.eventDateSelectedFilter"]),angular.module("sponsors",["bbw.sponsor-service","bbw.sponsor-index-controller","bbw.sponsor-detail-controller","bbw.sponsor-level-filter"]),angular.module("bbw-depends",["events","sponsors"]);var app=angular.module("bbw",["ionic","google-maps","core-all","bbw-depends"]);app.config(function(a,b){a.state("tab",{url:"/tab","abstract":!0,templateUrl:"templates/tabs.html"}).state("tab.event-index",{url:"/events",views:{"events-tab":{templateUrl:"templates/event-index.html",controller:"EventIndexCtrl"}}}).state("tab.event-detail",{url:"/event/:eventId",views:{"events-tab":{templateUrl:"templates/event-detail.html",controller:"EventDetailCtrl"}}}).state("tab.sponsor-index",{url:"/sponsors",views:{"sponsors-tab":{templateUrl:"templates/sponsor-index.html",controller:"SponsorIndexCtrl"}}}).state("tab.sponsor-detail",{url:"/sponsor/:sponsorId",views:{"sponsors-tab":{templateUrl:"templates/sponsor-detail.html",controller:"SponsorDetailCtrl"}}}).state("tab.contact",{url:"/contact",views:{"contact-tab":{templateUrl:"templates/contact.html"}}}).state("tab.about",{url:"/about",views:{"about-tab":{templateUrl:"templates/about.html"}}}).state("tab.openingtap",{url:"/opening-tap",views:{"about-tab":{templateUrl:"templates/opening-tap.html"}}}),b.otherwise("/tab/about")}),angular.module("bbw-version",[]).value("version","0.0.1"),angular.module("bbw.eventDateSelectedFilter",[]).filter("eventDateSelected",["$parse",function(a){return function(b,c,d){if((c||angular.isUndefined(c))&&angular.isArray(b)){var e=[],f=angular.isString(c)?a(c):function(a){return a},g=function(a){return angular.isObject(a)?f(a):a},h=function(a,b){var c=new Date(a);c.setHours(0,0,0,0);var d=new Date(b);return d.setHours(0,0,0,0),angular.equals(c,d)};angular.forEach(b,function(a){var b=g(a);angular.forEach(d,function(c){h(b,c)&&e.push(a)})}),b=e}return b}}]),angular.module("bbw.event-detail-controller",["ionic"]).controller("EventDetailCtrl",["$scope","$stateParams","$window","EventsService","AddressService","GoogleMapsService",function(a,b,c,d,e,f){a.leftButtons=[{type:"button-icon icon ion-arrow-left-c",tap:function(){c.history.back()}}];var g=function(){var a=angular.element(document.querySelector(".angular-google-map")),b=a.isolateScope(),c=b.map;return c};a.event=d.get(b.eventId),a.$on("viewState.viewEnter",function(){var a=g();f.gmaps.event.trigger(a,"resize")});var h=a.event.location.address;!angular.isUndefined(h)&&angular.isString(h)&&e.geocode(h).then(function(a){var b=g();b.setZoom(16),b.setCenter(a)}),a.map={center:{latitude:45,longitude:-73},bounds:{},zoom:8}}]),angular.module("bbw.event-index-controller",["ionic"]).controller("EventIndexCtrl",["$scope","$log","$filter","$ionicModal","LoaderService","EventsService",function(a,b,c,d,e,f){a.initialized=!1,a.leftButtons=[],a.rightButtons=[{type:"button-icon icon ion-navicon",tap:function(){a.openModal()}}],d.fromTemplateUrl("templates/event-filter.html",function(b){a.modal=b},{scope:a,animation:"slide-in-up"}),a.toggle=function(){},a.openModal=function(){a.modal.show()},a.closeModal=function(){a.modal.hide()},a.$on("$destroy",function(){a.modal.remove()}),e.show("Retrieving Event List"),f.all().then(function(c){a.events=c,f.getEventDates(a.events).then(function(b){a.eventDates=_.map(b,function(a){return{date:a,selected:!0}}),a.selection=[],a.$watch("eventDates|filter:{selected:true}",function(b){a.selection=b.map(function(a){return a.date})},!0),e.hide(),a.initialized=!0},function(a){b.write(a)})},function(a){b.write(a)})}]),angular.module("bbw.event-service",[]).factory("EventsService",["$q","$timeout","$filter",function(a,b,c){var d=[{id:0,title:"Event 0",date:"2014-10-10T20:44:55",cost:9.99,description:"Description 1.",location:{name:"Metropolitan",address:"902 S Charles St, Baltimore, MD 21230",image:"img/temp/HS_logo_sl.png"}},{id:15,title:"Event 15",date:"2014-10-10T21:44:55",cost:20,description:"Description 1.",location:{name:"Max's Taphouse",address:"737 S Broadway, Baltimore, MD 21231",image:"img/temp/Maxs_New_sl.png"}},{id:1,title:"Event 1",date:"2014-10-10T20:44:55",cost:0,description:"Description 2",location:{name:"Metropolitan",address:"902 S Charles St, Baltimore, MD 21230",image:"img/temp/metro_logo_sl.png"}},{id:2,title:"Event 2",date:"2014-10-11T20:44:55",cost:0,description:"Description 3",location:{name:"Metropolitan",address:"902 S Charles St, Baltimore, MD 21230",image:"img/temp/metro_logo_sl.png"}},{id:3,title:"Event 3",date:"2014-10-11T20:44:55",cost:0,description:"Description 3",location:{name:"Metropolitan",address:"902 S Charles St, Baltimore, MD 21230",image:"img/temp/metro_logo_sl.png"}},{id:5,title:"Event 5",date:"2014-10-14T20:44:55",cost:0,description:"Description 3",location:{name:"Metropolitan",address:"902 S Charles St, Baltimore, MD 21230",image:"img/temp/metro_logo_sl.png"}},{id:6,title:"Event 6",date:"2014-10-14T20:44:55",cost:0,description:"Description 3",location:{name:"Metropolitan",address:"902 S Charles St, Baltimore, MD 21230",image:"img/temp/metro_logo_sl.png"}},{id:7,title:"Event 7",date:"2014-10-15T20:44:55",cost:0,description:"Description 3",location:{name:"Metropolitan",address:"902 S Charles St, Baltimore, MD 21230",image:"img/temp/metro_logo_sl.png"}},{id:8,title:"Event 8",date:"2014-10-17T20:44:55",cost:0,description:"Description 3",location:{name:"Metropolitan",address:"902 S Charles St, Baltimore, MD 21230",image:"img/temp/metro_logo_sl.png"}},{id:9,title:"Event 9",date:"2014-10-17T20:44:55",cost:0,description:"Description 3",location:{name:"Metropolitan",address:"902 S Charles St, Baltimore, MD 21230",image:"img/temp/metro_logo_sl.png"}},{id:10,title:"Event 10",date:"2014-10-19T20:44:55",cost:0,description:"Description 3",location:{name:"Metropolitan",address:"902 S Charles St, Baltimore, MD 21230",image:"img/temp/metro_logo_sl.png"}},{id:11,title:"Event 11",date:"2014-10-19T20:44:55",cost:0,description:"Description 3",location:{name:"Metropolitan",address:"902 S Charles St, Baltimore, MD 21230",image:"img/temp/metro_logo_sl.png"}},{id:12,title:"Event 12",date:"2014-10-20T20:44:55",cost:0,description:"Description 3",location:{name:"Metropolitan",address:"902 S Charles St, Baltimore, MD 21230",image:"img/temp/metro_logo_sl.png"}},{id:13,title:"Event 13",date:"2014-10-20T20:44:55",cost:0,description:"Description 3",location:{name:"Metropolitan",address:"902 S Charles St, Baltimore, MD 21230",image:"img/temp/metro_logo_sl.png"}},{id:14,title:"Event 14",date:"2014-10-20T20:44:55",cost:0,description:"Description 4",location:{name:"Metropolitan",address:"902 S Charles St, Baltimore, MD 21230",image:"img/temp/metro_logo_sl.png"}},{id:4,title:"Event 4",date:"2014-10-12T20:44:55",cost:0,description:"Description 3",location:{name:"Metropolitan",address:"902 S Charles St, Baltimore, MD 21230",image:"img/temp/metro_logo_sl.png"}}],e=function(){var c=a.defer();return b(function(){c.resolve(d)},300),c.promise};return{all:e,get:function(a){var b=angular.isString(a)?Number(a):a,c=_.where(d,{id:b});return c[0]},getEventDates:function(b){var d=a.defer(),f=function(a){var b=_.pluck(a,"date"),e=_.map(b,function(a){var b=new Date(a);return new Date(b.getFullYear(),b.getMonth(),b.getDate()).toISOString()});a=c("unique")(e,"date");var f=function(a,b){return new Date(a)>new Date(b)?1:new Date(a)<new Date(b)?-1:0};a=a.sort(f),d.resolve(a)};return angular.isUndefined(b)?e().then(function(a){f(a)}):f(b),d.promise}}}]),angular.module("core-services",["core.address-service","core.loader-service","core.google-maps-service"]),angular.module("core-filters",["core.costFilter","core.matchesDateFilter","core.uniqueFilter"]),angular.module("core-all",["core-services","core-filters"]),angular.module("core.costFilter",[]).filter("costnone",["$injector",function(a){return function(b,c){if(angular.isString(b)){var d=a.get("$filter"),e=d("currency"),f=e(0);angular.equals(b,f)&&(angular.isUndefined(c)&&(c="Free"),b=c)}else b=void 0;return b}}]),angular.module("core.matchesDateFilter",[]).filter("matchesDate",["$parse",function(a){return function(b,c,d){if(c===!1)return b;if((c||angular.isUndefined(c))&&angular.isArray(b)){var e=[],f=angular.isString(c)?a(c):function(a){return a},g=function(a){return angular.isObject(a)?f(a):a},h=function(a,b){var c=new Date(a);c.setHours(0,0,0,0);var d=new Date(b);return d.setHours(0,0,0,0),angular.equals(c,d)};angular.forEach(b,function(a){var b=g(a);h(b,d)&&e.push(a)}),b=e}return b}}]),angular.module("core.uniqueFilter",[]).filter("unique",["$parse",function(a){return function(b,c){if(c===!1)return b;if((c||angular.isUndefined(c))&&angular.isArray(b)){var d=[],e=angular.isString(c)?a(c):function(a){return a},f=function(a){return angular.isObject(a)?e(a):a};angular.forEach(b,function(a){for(var b=!1,c=0;c<d.length;c++)if(angular.equals(f(d[c]),f(a))){b=!0;break}b||d.push(a)}),b=d}return b}}]),angular.module("core.address-service",["core.google-maps-service"]).factory("AddressService",["$q","$timeout","GoogleMapsService",function(a,b,c){var d=function(b){var d=a.defer();if(angular.isUndefined(b)||angular.isNull(b)||!angular.isString(b))d.reject("The address was not in the correct format.");else{var e=new c.gmaps.Geocoder;e.geocode({address:b},function(a,b){b==c.gmaps.GeocoderStatus.OK?d.resolve(a[0].geometry.location):d.reject("Geocode was not successful for the following reason: "+b)})}return d.promise};return{geocode:d}}]),angular.module("core.google-maps-service",[]).service("GoogleMapsService",function(){return{gmaps:google.maps}}),angular.module("core.loader-service",[]).factory("LoaderService",["$rootScope","$ionicLoading",function(a,b){return{show:function(c){a.loading=b.show({content:c,animation:"fade-in",showBackdrop:!0,maxWidth:200})},hide:function(){a.loading.hide()}}}]),angular.module("bbw.sponsor-detail-controller",[]).controller("SponsorDetailCtrl",["$scope","$stateParams","$window","SponsorsService",function(a,b,c,d){a.sponsor=d.get(b.sponsorId),a.leftButtons=[{type:"button-icon icon ion-arrow-left-c",tap:function(){c.history.back()}}]}]),angular.module("bbw.sponsor-index-controller",[]).controller("SponsorIndexCtrl",["$scope","LoaderService","SponsorsService",function(a,b,c){a.initialized=!1,b.show("Retrieving Sponsor List"),c.all().then(function(d){a.sponsors=d,a.levels=c.getLevels(),b.hide(),a.initialized=!0})}]),angular.module("bbw.sponsor-level-filter",[]).filter("sponsorLevel",[function(){return function(a){if(!angular.isNumber(a))return a;switch(a){case 0:a="Flagship Sponsor";break;case 1:a="Gold Sponsor";break;case 2:a="Silver Sponsor";break;default:a="Unknown Sponsor"}return a}}]),angular.module("bbw.sponsor-service",[]).factory("SponsorsService",["$q","$timeout",function(a,b){var c=[{id:0,level:0,title:"Heavy Seas",image:"img/temp/HS_logo_sl.png",description:"This is the description for Heavy Seas."},{id:1,level:1,title:"Metropolitan",image:"img/temp/metro_logo_sl.png",description:"This is the description for Metropolitan."},{id:2,level:1,title:"Max's Tap House",image:"img/temp/Maxs_New_sl.png",description:"This is the description for Max's."},{id:3,level:2,title:"Brewer's Art",image:"img/temp/brewers-art.png",description:"Another description for Brewer's Art."}],d=[0,1,2],e=function(){var d=a.defer();return b(function(){d.resolve(c)},300),d.promise};return{all:e,get:function(a){return c[a]},getLevels:function(){return d}}}]);